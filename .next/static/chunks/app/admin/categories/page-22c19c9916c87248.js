(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{952:(e,a,i)=>{Promise.resolve().then(i.bind(i,2254))},2254:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>o});var t=i(5155),r=i(2115),s=i(5037),l=i(5565);function o(){let[e,a]=(0,r.useState)([]),[i,o]=(0,r.useState)({name:"",image:"",description:""}),[n,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{m(!0);let e=await fetch("/api/categories",{cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw Error("Kategoriler y\xfcklenirken bir hata oluştu");let i=await e.json();a(i)}catch(e){console.error("Kategorileri getirme hatası:",e),s.oR.error("Kategoriler y\xfcklenirken bir hata oluştu")}finally{m(!1)}})()},[]);let h=async t=>{t.preventDefault();try{if(n){let e=new FormData;if(e.append("file",n),e.append("category",i.name||""),!(await fetch("/api/upload",{method:"POST",body:e})).ok)throw Error("Resim y\xfcklenirken bir hata oluştu")}let t=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,id:Math.random().toString(36).substr(2,9)})});if(!t.ok)throw Error("Kategori eklenirken bir hata oluştu");let r=await t.json();a([...e,r]),o({name:"",image:"",description:""}),c(null),s.oR.success("Kategori başarıyla eklendi")}catch(e){console.error("Kategori ekleme hatası:",e),s.oR.error("Kategori eklenirken bir hata oluştu")}},g=async i=>{if(confirm("Bu kategoriyi silmek istediğinize emin misiniz?"))try{if(!(await fetch("/api/categories/".concat(i),{method:"DELETE"})).ok)throw Error("Kategori silinirken bir hata oluştu");a(e.filter(e=>e.id!==i)),s.oR.success("Kategori başarıyla silindi")}catch(e){console.error("Kategori silme hatası:",e),s.oR.error("Kategori silinirken bir hata oluştu")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Kategori Y\xf6netimi"})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Yeni Kategori Ekle"}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Kategori Adı"}),(0,t.jsx)("input",{type:"text",value:i.name,onChange:e=>o(a=>({...a,name:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"A\xe7ıklama"}),(0,t.jsx)("textarea",{value:i.description,onChange:e=>o(a=>({...a,description:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Kategori G\xf6rseli"}),(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-4",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let i=null===(a=e.target.files)||void 0===a?void 0:a[0];i&&(c(i),o(e=>({...e,image:"/categories/".concat(i.name)})))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),n&&(0,t.jsx)("div",{className:"relative w-16 h-16 rounded-full overflow-hidden",children:(0,t.jsx)(l.default,{src:URL.createObjectURL(n),alt:"Se\xe7ilen g\xf6rsel",fill:!0,className:"object-cover"})})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Kategori Ekle"})})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Mevcut Kategoriler"}),(0,t.jsx)("div",{className:"space-y-4",children:d?(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-indigo-600"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"Y\xfckleniyor..."})]}):(0,t.jsxs)(t.Fragment,{children:[e.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"relative w-12 h-12 rounded-full overflow-hidden flex-shrink-0",children:(0,t.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.description})]}),(0,t.jsx)("button",{onClick:()=>g(e.id),className:"p-2 text-red-600 hover:text-red-800",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)),0===e.length&&(0,t.jsx)("p",{className:"text-center text-gray-500 py-4",children:"Hen\xfcz kategori eklenmemiş"})]})})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[37,565,441,517,358],()=>a(952)),_N_E=e.O()}]);